

■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
+---------------------------------------------// Memo(2008.11) //----------------------------------------------------------+
■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■


■■■■■■■■■■■■■■■■■■ 2008.11.01(토) 작업 ■■■■■■■■■■■■■■■■
----> 12:00 ~ 15:00  --> 미아삼거리역(이과장집) -> 교보생명 -> 낙성대역) 

- 교보 홈 리뉴얼 Prj
- 교보생명 철수(짐 정리) 
==============================================================================================================

■■■■■■■■■■■■■■■■■■ 2008.11.03(월) 작업 ■■■■■■■■■■■■■■■■
----> 07:10 ~ 18:00  --> 교보 종료 파티(배과장, 이과장) 

- 교보 홈 리뉴얼 Prj
- 교보생명 철수(노트북 포맷) 
==============================================================================================================

- 삼성화재 PM 면접(손영수 PM)
일시: 2008.11.03(월) 13시 ~ 15시 
장소: 을지로 입구역 한진빌딩 
(주)3rdinfo (*) ==> (삼성화재 5명이서 7개월 470) 
메트라이프생명 NFSS 프로젝트에서 전화 옴 거절  ==> 삼성화재로 가기로 확정(박경미 대리) 
==============================================================================================================

- [스포츠조선 기사] - [클릭! 클럽축구] (1) 서울 신사축구회   
http://spn.chosun.com/site/data/html_dir/2008/10/30/2008103000769.html 
==============================================================================================================

■■■■■■■■■■■■■■■■■■ 2008.11.04(화) 작업 ■■■■■■■■■■■■■■■■
----> 12:00 ~ 19:00  --> 종로(점심: 이과장) 

- Project 준비
- 배과장 만남
지하철 1호선 송내역 20시 30분  
1. 저녁(놀부 부대지게: 내가 쏨) 
2. OSH-959CS 복합마이콤식 가습기(오성 웰텍) 받음 
http://www.gmarket.co.kr/challenge/neo_goods/goods.asp?goodscode=153330783&pos_shop_cd=GE&pos_class_cd=300013817&pos_class_kind=S 
==============================================================================================================

■■■■■■■■■■■■■■■■■■ 2008.11.05(수) 작업 ■■■■■■■■■■■■■■■■
----> 00:00 ~ 00:00 

- Project 준비
 - 집  
==============================================================================================================

■■■■■■■■■■■■■■■■■■ 2008.11.06(목) 작업 ■■■■■■■■■■■■■■■■
----> 09:00 ~ 19:00 

- Project 준비
- 도봉산 산행
07:00 기상  
08:20 7호선 남성역 
09:20 도봉산역 
09:30 도봉산역 1번 출구(이과장)  
12:00 정상(도봉산 신선대) 
12:10 점심(김밥) 
13:00 하산 
13:30 맥주(소라+골뱅이) 
17:00 이과장집(성북구 장위1동) 
21:00 맥주(이과장집): 이과장(10번째) 
23:00 취침 
==============================================================================================================

■■■■■■■■■■■■■■■■■■ 2008.11.07(금) 작업 ■■■■■■■■■■■■■■■■
----> 18:00 ~ 21:00 

- Project 준비
 - 도봉산 산행2
09:00 기상(이과장집) 
19:00 흥부 보쌈집(이과장: 미아삼거리역) 
21:00 낙성대역(귀가) 
21:10 취침 
==============================================================================================================

■■■■■■■■■■■■■■■■■■ 2008.11.08(토) 작업 ■■■■■■■■■■■■■■■■
----> 09:00 ~ 14:00 

- Project 준비
- 11:20 ~ 12:00 면접(한우리 시스템 신 승춘 사장): 2호선 성수역  ==> 11월.10(월) 하나은행으로 출근(3개월 500 합의) 
- 14:20 ~ 19:00 강남 터미널 -> 구미 -> 동대구 
- 19:10 ~ 20:00 이발 
- 20:30 ~ 21:00 칼국수집(일남내) 
- 21:10 ~ 21:00 일남이네 집(근아, 성은) 
- 23:00 취침  
==============================================================================================================

- 태마 가계부 샘플 
일련번호 분류명 대분류계정명 계정명 가계부일자 내용 금액 
2174 현금지출 식비 주식 2008-11-01 2. 점심(황태북어국): 이과장 8,000 
2179 현금지출 의복 세탁비 2008-11-01 바지 3벌(얼룩:추가요금) 8,000 
2191 카드지출 교통비 대중교통비 2008-11-03   4. 버스(낙성대역 -> 종로1가) 1,000 
==============================================================================================================

■■■■■■■■■■■■■■■■■■ 2008.11.10(월) 작업 ■■■■■■■■■■■■■■■■
----> 09:00 ~ 22:00  --> 하나은행 첫 출근, AML 김대후 부장 만남 

- 하나은행 Prj
- 하나은행 EDMS 차세대 연계 Proj(수신(금융정보)) 
서달원 PM(한국 후지쯔): * 
김민영 차장(한우리시스템 총괄): * 
곽영훈 과장(금융정보(수신에 포함), SM) ====> 12월 중순(개발완료) 
심석준 과장(무역금융) 
유상석 과장(무역금융, 외환) 
박성우 과장(외환) 
김정자 과장(여신) 
==============================================================================================================

- 하나은행 회의(10:30 ~ 10:50) 
1. 곽영훈 차장과 금융정보 개발 
2. 토요근무(09:00 ~ 18:00) 
==============================================================================================================

- 하나은행 네트웍(IP 주소)  ---------  ==> IP 충돌로 네트웍 설정 못함 
IP: 192.24.51.152 
S.M: 255.255.255.0 G.W: 192.24.51.1 
DNS: 164.124.101.2 
------------------------------------------------------------------------------ 
- 하나은행 EDMS 개발환경 위키독스 
http://111.18.1.56/mybook/tree/books 
  
- 파일서버 
주소 : \\111.18.1.56 
ID/PW : edms_usr/edms_usr 

- 프린터 설정  
IP: 192.24.51.52 드라이버명: HP Lasejet 5000 series PCL   이름: EDMS 프로젝트  
==============================================================================================================

- Video 카드 설치 에러 
1. 삼성 노트북 NT-Q70 XP Geforce 설치시 에러 
 1) 에러내용: 복사 오류 -> "nv4_mini.sy_ 파일을 복사할 수 없습니다." 
 2) 원인: 호환되지 않는 드라이버 파일 
 3) 조치: 
  - 고객지원센터 1588-3366번으로 상담(원격으로 서비스 받음) 
  - 자이젠 홈(http://www.zaigen.co.kr/mypage/com_apply.asp) --> 다운로드센터 --> 모델 검색: q70 --> win XP 
   --> 20070706175814312_NVIDIA_Ext_Gfx_Driver6.14.11.119.zip 다운 받아서 압축 풀고 설치  
==============================================================================================================

- 물품반출증(하나은행) 
발급번호: 6727 
품명: 노트북, 물품번호(SN): CNBR4300 
담당자: 조삼현 과장(5층 정보공통팀) 
==============================================================================================================

- dll 등록 에러(TAMA's HouseK_Book) 
REGSVR32 "D:\01. Programming\02. VB\01. TAMA_HouseK_Book\99.UserOCX\VB6KO.DLL"  ==> 에러 
Vb6stkit.dll, EXCEL9.OLB 
REGSVR32 "D:\01. Programming\02. VB\01. TAMA_HouseK_Book\99.UserOCX\fpSpr60.ocx" ==> 정상 
==============================================================================================================

■■■■■■■■■■■■■■■■■■ 2008.11.11(화) 작업 ■■■■■■■■■■■■■■■■
----> 07:20 ~ 22:00 --> 간단 술(현용, C9 손문숙 과장, 황팀장) 

- 하나은행 Prj
- 하나은행 EDMS 차세대 연계 Proj(수신(금융정보))
- EDMS(전자문서관리시스템): 전자문서관리는 LifeCycle(New, checkin, checkout, release)을 관리하고 이전  
버전 및 이력 및 검색등 관리 할 수 있도록 만든 시스템 
Electronic Document Management System(Enterprise Document Management  System) 
- EAI(Enterprise Application Integration): EAI는 기업의 비즈니스와 애플리케이션의 새롭고 통합적인 시각을  
개발하고, 기존의 애플리케이션들이 새로운 시각 내에 어떻게 맞추어지는지를 확인하고, 또 새로운 
애플리케이션과 데이터를 추가하는 동안 이미 존재하는 것들을 효과적으로 재 사용할 수 있는 방법을 고안하는  
등의 활동을 포함할 수 있다. 
==============================================================================================================

- EDMS 개발 Project 개발자 환경 및 개발 Tool 설치 가이드 
 01. JDK 설치(j2sdk 1.4.2_04 다운로드) 
 02. 웹로직 설치(Weblogic812) 
 03. 웹로직 설치 및 환경 설정 ==> 구성이름: depodomain(수신), 로컬 포트: 9002(수신) 

 04. DB Connection Pool 설정 
어드민 콘솔(http://localhost:9002/console)로 로그인(ID:weblogic, PW:weblogic)하면 다음과 같은 화면이 나타난다.   
2) 어드민 콘솔의 화면 왼쪽 탐색 트리에서 다음의 항목을 순서대로 선택한다. 
Services → JDBC → Connection Pools 
3) 오른쪽 화면에서 “Configure a new JDBC Connection Pool...” 링크를 선택한다. 
4) Database Type에서 “Oracle”을 선택하고 Database Driver에서 “*Oracle’s Driver (Thin) Versions:8.1.7,9.0.1,9.2.0”을  
선택한 후 <Continue>버튼을 클릭한다. 
5)“Define connection properties” 화면이 보이면 아래와 같이 각 항목에 필요한 속성 값을 정의해 주고 <Continue> 클릭 
Name : DBBPMConnectionPool_TEST ==> DBBPMConnectionPool(실서버) 
Database Name : DBBPM1 ==> DBBPM1(실서버) 
Host Name : 111.15.20.23 ==> 111.18.1.52(실서버) 
Port : 1555 
Database User Name : depo  ==> depo2(frexadm/frexadm11) 
Password : depo1   ==> depo2   

 05. JDBC Datasource 생성 
Name : DBBPMDataSource 
JNDI Name : DBBPMDataSource  
Honor Global Transaction : 선택  
Emulate Two-Phase Commit for non-XA Driver : 선택 

 06. CVS설정  
 07. Application Deploy & Redeploy 
 08. 기타(필독) 
 A. 로그보기(테스트, 운영) 
111.15.1.4 텔넷 접속 (depo01/depo01_dev): 수신 
1) log4j로그  
[depo01@sun450-03]/home/apps/log/weblogic/depo2 > tail -f common.log 
2) system error, out 로그   
[depo01@sun450-03]/home/apps/log/weblogic/depo2 > tail -f deposvr2.log 
==============================================================================================================

- DB 테이블에 frexadm2 추가  
SELECT * FROM frexadm2.depo_wf_master 
SELECT * FROM FREXADM2.FREX_CM_CODE 
/depo_project2/src/depoEar/depoWebApp/WEB-INF/src/com/hana/common/admin/dao/AdminReassignDAO.java 
==============================================================================================================

- struts 파일 경로 
xdoclet이란 툴을 이용하여 자바 소스내의 주석문을 이용하여 struts-config.xml을 자동으로 제너레이트  
/depo_project2/src/depoEar/depoWebApp/WEB-INF/struts-config.xml 
- tiles 파일 경로 
/depo_project2/src/depoEar/resources/tilesdef/tiles-defs.xml 
==============================================================================================================

- 오라클 설치 에러 
현상: 라이브러리를 로드하는 중 에러 발생: areaQueries 모든 제품설치를 중지합니다와 이구성 요소만 중지합니다 
조치: 설치프로그램 경로명에 한글이 포함되어 있으면 안되는 걸로   
알고 있습니다. 설치프로그램이 있는 폴더를 (예 ->c:\oracle9i)로 해보세요  
==============================================================================================================

- 네이트온 설정(프록시 설정) 
종류: SOCKS 버젼 4 서버: 111.24.5.191 포트: 8080 
P2P연결포트: 5002 
프록시 서버(proxy server): 클라이언트가 자신을 통해서 다른 네트워크 서비스에 간접적으로 접속할 수 있게  
해 주는 네트워크 서비스이다. 
-------------------------------------------------------------------- 
종류: HTTP 프록시 서버: pri.nate.com 포트: 80 
==============================================================================================================

■■■■■■■■■■■■■■■■■■ 2008.11.12(수) 작업 ■■■■■■■■■■■■■■■■
----> 07:20 ~ 22:10 

- 하나은행 Prj
- 하나은행 EDMS 차세대 연계 Proj(수신(금융정보)) 
수신: http://127.0.0.1:9002/loginForm.do  ==> depodomain 
http://localhost:9002/console 
===> 메뉴 -> Run -> External Tools -> depo_project build.xml 실행할 것(Deploy 실행) 
수신(차세대연계): http://127.0.0.1:9004/loginForm.do  ==> depodomain2(/depoLogin.do) 
http://localhost:9004/console 
===> 메뉴 -> Run -> External Tools -> depo2_project build.xml 실행할 것(Deploy 실행) 
외환: http://127.0.0.1:7001/frexLogin.do  ==> frexdomain 
외환(차세대연계): http://127.0.0.1:7002/frexLogin.do  ==> frexdomain2  
기업: http://127.0.0.1:8001/eplndomain.do  ==> eplndomain 
기업(차세대연계): http://127.0.0.1:8002/eplndomain.do  ==> eplndomain2  
카드: http://127.0.0.1:9001/crcddomain.do  ==> crcddomain 
카드(차세대연계): http://127.0.0.1:9003/eplndomain.do  ==> crcddomain2   
==============================================================================================================

- Java Build Path 에러 
내용: Java Build Path 에러 
/depo_project/src/depoEar/depoWebApp/WEB-INF/src/com/hana/sample/json/model/WebLaunchModel.java  
package com.hana.sample.json.model;  ==> 에러가 뜸 
조치: Propertites of depo_project => Java Build Path ==> Libraries  
JRE Sytem Library(마우스 오른쪽 클릭) -> Add Library 
Sytem Library: j2sdk 1.4.2_04 체크  
------------------------------------------------------------------------------ 

- Deploy 에러 
내용: Could find't the main class[ Java VM Launcher] 
조치: 메뉴 -> Run -> External Tools -> depo_project build.xml을 삭제하고 다시 생성 
==============================================================================================================

- 이클립스(eclipse)에서 설치 
1. eclipse-SDK-3.2.2-win32 설치 --> 문제점(eclipse에서 Server 안 보임): 해결책(eclipse-SDK-3.2 이상 설치) 
1) wtp-all-in-one-sdk-R-1.5.4-win32 설치 권유  
2) installed JRE 추가 
(Window -> Prefrerence > Java -> installed JRE --> add: C:\j2sdk1.4.2_04 추가) 
2. JDK 설치: j2sdk 1.4.2_04 설치 
==============================================================================================================

- 로그인 권한 조회  
SELECT EMP_NO, PASSWD_NO, EMP_NM, BR_CD, JIK_GUB  
FROM frexadm2.FREX_CM_USER 
WHERE EMP_NO IN ('0000131', '0000132') 
-- WHERE EMP_NM LIKE '강현정%' 
0000131 1 강현주 036 
0000132 1 강현정 036  
DBBPM1_TEST depo2/depo2  
==============================================================================================================

- 기업 업로드, 리로드 방법 
1. 수정한 파일을 eclipse에서 Commit 
2. 수정한 파일(.class, .jsp) FTP로 올리기 
FTP 주소 : 111.15.1.4 (depo01/depo01_dev) 
리모드 리렉토리: /home/apps/dom_depo/serverclasses/depoEar/depoWebApp 
------------------------------------------------------------------------------ 
- 기업(차세대연계) 업로드, 리로드 방법 
1. 수정한 파일을 eclipse에서 Commit 
2. 수정한 파일(.class, .jsp) FTP로 올리기 
FTP 주소: 111.15.1.4 (depo01/depo01_dev) 
리모드 리렉토리: /home/apps/dom_depo2/applications/depoEar/depoWebApp 
3. relaod 
http://111.15.1.46:9082/reload.do 
==============================================================================================================

- DB 테이블에 frexadm2 추가(UltraEdit -> 검색(S) -> 파일내 에서 찾기(I): 하위 디랙토리 검색(S) 
SELECT * FROM frexadm2.depo_wf_master 
SELECT * FROM FREXADM2.FREX_CM_CODE 
/depo_project2/src/depoEar/depoWebApp/WEB-INF/src/com/hana/common/admin/dao/AdminReassignDAO.java 
여신:epln, 수신:depo, 외환:frex, 카드:crcd  
Frexadm. ---> frexadm2 
==============================================================================================================

■■■■■■■■■■■■■■■■■■ 2008.11.13(목) 작업 ■■■■■■■■■■■■■■■■
----> 07:20 ~ 21:00 --> 맥주(이과장집): 이과장(11번째):코피 

- 하나은행 Prj
- 하나은행 EDMS 차세대 연계 Proj(수신(금융정보)) 
수신: http://127.0.0.1:9002/loginForm.do  ==> depodomain 
http://localhost:9002/console  
http://111.15.1.4:9082/loginForm.do  ==> TEST 서버 
http://111.15.1.4:9082/ftp.do   ==> TEST 서버(C:\EDMS 삭제 후 다시 다운 받을 때)  
http://111.16.1.128/loginForm.do  ==> 실 서버 

===> 메뉴 -> Run -> External Tools -> depo_project build.xml 실행할 것(Deploy 실행) 
수신(차세대연계): http://127.0.0.1:9004/loginForm.do  ==> depodomain2(/depoLogin.do) 
http://localhost:9004/console 
===> 메뉴 -> Run -> External Tools -> depo2_project build.xml 실행할 것(Deploy 실행) 
외환: http://127.0.0.1:7001/frexLogin.do  ==> frexdomain 
외환(차세대연계): http://127.0.0.1:7002/frexLogin.do  ==> frexdomain2  
기업: http://127.0.0.1:8001/eplndomain.do  ==> eplndomain 
기업(차세대연계): http://127.0.0.1:8002/eplndomain.do  ==> eplndomain2  
카드: http://127.0.0.1:9001/crcddomain.do  ==> crcddomain 
카드(차세대연계): http://127.0.0.1:9003/eplndomain.do  ==> crcddomain2   
==============================================================================================================

- 발행금액 한글입력 제한 
/depo_project/src/depoEar/depoWebApp/com/hana/depo/dpb/sub/dpb015_detail_pop05.jsp 파일에서 
<tr>  
<td><img src="/dot_green.gif" width="11" height="11" hspace="2" align="absmiddle">발행금액</td> 
<td><input name="supyo_amt" type="text" size="19" maxlength="17" value="<%=frm.checkNull( ht.get("supyo_amt") ) %>" 
onKeyDown="onlyNumberInput();">원 
</td> 
</tr> 

<script> 
if (!isNumber(supyo_amt_Check)) { 
alert("발행금액은 숫자로 입력하셔야 됩니다");  
frm.supyo_amt.focus();  
return false; 
}   

/* ============================================================= 
  Function : 입력값에 숫자만 있는지 체크 
  Return   : N/A 
  Usage    :  
================================================================= */ 
function isNumber(input) { 
    var chars = "0123456789"; 
    //alert("[/dpb015_detail_pop05.jsp]:[isNumber()] [input.length]"+ input.length +"[input]"+ input +"[chars]"+ chars); 
     
    for (var inx = 0; inx < input.length; inx++) {  //입력값이 특정 문자(chars)만으로 되어있는지 체크  
       if (chars.indexOf(input.charAt(inx)) == -1) 
   return false; 
    } 
    return true;      
} 

/* =================================================================== 
Function : onlyNumberInput() 
Return   : 
Usage   : 숫자만 입력 가능 (onKeyDown 이벤트) 
=================================================================== */ 
function onlyNumberInput(){  
var code = window.event.keyCode; 

if (event.shiftKey)  
{ 
window.event.returnValue = false; 
return; 
} 

 if ((code > 32 && code < 48)  (code > 57 && code < 65)  (code > 90 && code < 97)  
 (code > 34 && code < 41)  (code > 47 && code < 58)  (code > 95 && code < 106)  
 code == 8  code == 9  code == 13  code == 46  code == 16) { 
 window.event.returnValue = true; 
 return; 
}   
window.event.returnValue = false; 
} 
</script> 
==============================================================================================================

- 통보서 일반 발송 서식  
/home/apps/dom_depo/app5lications/oz35/repository_files 
C:\Program Files\FORCS\OZ XStudio\Work  ===> 해당 폴더를 Working 폴더로 지정 
report-24.ozr, report-24.odi 
http://127.0.0.1:9002/dpfi_PrintRegisterPerson.do 

-- 금융_WF_상세 조회 
SELECT F.WF_NO, F.REQ_BR_NM AS 요청기관, F.MGR AS 담당자, F.TEL_NO AS 담당자_전화,  
   F.REQ_FACTS AS 요청사유, F.REQ_DATE AS 요구일자  
FROM DEPO_WF_DETAIL F 
 WHERE F.REQ_DATE IS NOT NULL 
ORDER BY F.REQ_DATE DESC 
-- ; 

-- 금융_WF_명의인통보  
SELECT G.WF_NO, G.NM AS 성명, G.CHARGER AS 담당자, G.CHARGER_TEL AS 담당자_전화, OFFER_DATE AS 통보일 
FROM DEPO_WF_NM_NTF G    
--; 
--------------------------------------------------------------------------------------------------------- 
- strReplace 함수 활용  
#OZParam#= "19391,19395,19399" 
string tmp=strreplace(#OZParam.idx#,","," or g.idx=");  
==> g.idx=19391, or g.idx=19395, or g.idx=19399 
==============================================================================================================

- 명의인 통보서 업로드(등기발송 리스트) 
요청 받은 Excel 파일을 우편번호, 이름, 등기번호로 조회하여 update 시킴 
1. test DB에 백업 frexadm / frexadm11  
create table depo_wf_ret_ntf_200081113 as select * from depo_wf_ret_ntf@real_bpm 
2. 운영 DB에서 select / update 를 한다. 
- 먼저 select 를 해서 모든 데이타의 건수를 조회한다. 
- 건수 1인것만 update를 한다.(단 업데이트 건수가 1인지 확인을 한번더 한다.) 
- commit 
select * from depo_wf_ret_ntf  ==> 우편번호 조회 
2008년 11월04일 등기발송리스트(등록 실패건).xls 작성 
==============================================================================================================

■■■■■■■■■■■■■■■■■■ 2008.11.14(금) 작업 ■■■■■■■■■■■■■■■■
----> 08:20 ~ 19:30  --> 한우리 회식(삼겹살, 맥주, 노래방): 신사장, 김차장, 김과장, 오경주씨 

- 하나은행 Prj
- 하나은행 EDMS 차세대 연계 Proj(수신(금융정보)) 
수신: http://127.0.0.1:9002/loginForm.do  ==> depodomain 
http://localhost:9002/console  
http://111.15.1.4:9082/loginForm.do  ==> TEST 서버 
http://111.15.1.4:9082/ftp.do   ==> TEST 서버(C:\EDMS 삭제 후 다시 다운 받을 때) 
   
- 통보서 일반 발송 서식 
/home/apps/dom_depo/app5lications/oz35/repository_files 
C:\Program Files\FORCS\OZ XStudio\Work  ===> 해당 폴더를 Working 폴더로 지정 
report-24.ozr, report-24.odi 
http://127.0.0.1:9002/dpfi_PrintRegisterPerson.do  
==============================================================================================================

- 수신 업무 실무 교육(16:00 ~ 19:00)  
1. 수신 협의 요청 사항(담당자: 양현주)   
 1) 제공정보작성(금융정보작업 Tab ) 완료후 추가입력 기능 제공 요청 
 2) 명의인 통보서 업로드, 다운로드 기능 수정 요청  
--------------------------------------------------------------------------------- 
0000131(접수자:접수), 0000132(책임자:작성권한), 0000133(결재자:결재권한), 0000134(결재자:결재권한) 
==============================================================================================================

- Telnet 팁 
> ls -al   
.profile 
> view .profile ===> 단축용어 보기 
> find는./-name "*DAO.java" lxargs ls -al    ===> 파일 찾기  
> ESC + k  ===> 이전에 입력한 내용 보기(히스토리) 
==============================================================================================================

- 계약서 작성 
기간: 2008.11.10(월) ~ 2009.02.09(월) 
갑: 한우리시스템 신승춘 사장 
하나은행 EDMS 차세대 연계 Proj(월: 500) 
==============================================================================================================

■■■■■■■■■■■■■■■■■■ 2008.11.15(토) 작업 ■■■■■■■■■■■■■■■■
----> 09:30 ~ 18:00   --> 토요근무, 이과장 만남(고속터미널까지 배웅) 

- 하나은행 Prj
- 하나은행 EDMS 차세대 연계 Proj(수신(금융정보)) 
- 제공정보작성 완료후 추가입력 기능 
log.debug("processGubun - listForm.getConditions()[0] : "+listForm.getConditions()[0]); 

1. 금융정보 작업자 작업 분배(/com/hana/depo/dpfi/body/dpfi_work_assign_list_inbox.jsp)  
  
2. 금융정보제공 센타(com.hana.depo.dpb.action.DPB015WorkfloAction)  
 1) http://127.0.0.1:9002/DP015_Workobject.do?workObjectId=F572EADAB8F411DCA63D0003BA29841F&queueName=Inbox&method=detail& 
 2) com.hana.depo.dpb.action.DPB015WorkfloAction.java 에서(/depo_project/src/depoEar/depoWebApp 
 /WEB-INF/struts-config.xml 파일 자동으로 생성 ==> Xdoclet사용) 
 /** 
 * Xdoclet사용을 위한 태그 
 * @struts.action 
 *      name="DPB015WorkfloForm" 
 *      parameter="method" 
 *      path="/DP015_Workobject"  
 *      scope="request" 
 *      validate="true" 
 * 
 * @struts.action-forward 
 *      name="detail" 
 *      path="/com/hana/depo/dpb/body/dpb015_detail.jsp" 

public ActionForward detail(ActionMapping mapping, 
            ActionForm form, 
            HttpServletRequest request, 
            HttpServletResponse response) throws Exception { 

} 

 3) /com/hana/depo/dpb/body/dpb015_detail.jsp 파일에서 
<img src="/button/add_s.gif" width="28" height="17" hspace="2"  onclick="if(docstatus('Y')){openDlg('4','add','','');}"> 
==> 추가 

function docstatus(stat) { 
  alert("[/dpb015_detail.jsp] [docstatus()] [stat]"+ stat +"[workObject.disuse_yn]"+ $('workObject.disuse_yn').value); 
if ($('workObject.offer_rjt').checked) { 
alert('기관제공 거부시 더이상 진행하실 수 없습니다.'); 
return false; 
} 
else { 
if (!isRunning()) { 
    return false; 
  } 
  if (stat == "D" ) { 
  if ($('workObject.disuse_yn').value == "N") { 
alert('대상자를 추가,수정,변경등을 하시기 위해서는  \n "일괄 삭제"를  하셔야만 진행하실수 있습니다.'); 
return false; 
} 
else if ($('workObject.disuse_yn').value == "Y") { 
alert('이미 명의등록 대상자 확정을 하셨습니다. \n\n 대상자를 추가,수정,변경등을 하시기 위해서는   
일괄 삭제를  하셔야만 진행하실수 있습니다.'); 
return false; 
}  
return true; 
} 
else 
return true; 
} 
} 

 //명의대상자(통보대상자)  등록  
function openDlg(pop,gubun,seq, idx ) {  
if (pop == "5" && (gubun == "add"  gubun == "upload") ) { 
 var stat = chkJubsuStatus('D'); 
}  
if (stat == false) return false;  
// seq => 명의인 원본 일련번호 
// idx => 통보대상 일련번호  
    if (!isRunning()) { 
    return false; 
  } 
  
        var strUrl = "/DP015_Workobject.do?method=mgrpop&pop="+ pop +"&gubun="+ gubun +"&wfno=" + $('workObject.wf_no').value   ; 
        strUrl +=  "&seq="+ seq +"&idx="+ idx; 

        var swidth  = 340; 
        var sheight = 320;  
        if (pop == "4") sheight = 250; 
        if (pop == "5") sheight = 610;  
        var str = 'width=' + swidth + ', height = ' + sheight + ', scrollbars=no, toolbars=no, resizable=no, left=0, top=0'; 
       
        pop = window.open(strUrl, 'pop', str); 
        pop.focus(); 
 } 
--------------------------------------------------------------------------------------------------------- 

<img id="donewithnmorg" src="/button/all_del.jpg" hspace="2" onclick="if(docstatus('N')){doneWithNmOrg2()}"> 
==> 일괄삭제 

function doneWithNmOrg2() {  //일괄삭제 함수 
var msg =  "작성하신 제공정보 자료 및 첨부 파일은 모두 사라집니다. \n\n 일괄삭제 하시겠습니까  ?\n"; 
   
if (!isRunning()) { 
    return false; 
  } 
     
if (!confirm(msg) ) { 
alert('취소되었습니다.'); 
return false; 
} 
   
$('HideTransparentPanel').style.display = ""; 
var urlsrc = "/DP015_Workobject.do?method=prcSanitize&wf_no="+ $('workObject.wf_no').value +"&img_key="+ $('workObject.imageKey').value; 
$('hiddenFrame2').src = urlsrc; 
    
} 
--------------------------------------------------------------------------------------------------------- 

public ActionForward prcSanitize (ActionMapping mapping, 
    ActionForm form, 
    HttpServletRequest request, 
    HttpServletResponse response) throws Exception {   
} 
==============================================================================================================

- DB TABLE 명 
FREX_CM_USER: 공통사용자 
COMM_CM_MAP: 공통 맵정보  
==============================================================================================================

- 이클립스(eclipse)에서 Line 보이기(줄, 라인) 
window> Preferences > General > Editors > Text Editors에서 
Show line numbers ===> 체크 
==============================================================================================================

- Hana Messenger ID(메신저) 
9811673/ss****1(old: 9813422/ss****9) 
http://portal.hanafn.com:8206      9811673/ss****1 
==============================================================================================================

■■■■■■■■■■■■■■■■■■ 2008.11.18(일) 작업 ■■■■■■■■■■■■■■■■ 
----> 07:40 ~ 21:00 

- 묘사
00:00 기상(포항집) ==> 17일 23:50에 포항집 귀가 
09:00 기상  
12:30 묘사((작은 아버지, 대규네), (종욱 아제, 중협, 종근 아제, 준규), (7촌 병일 아제), 고모 3분, 고모부) 
14:50 종료 
17:00 포항 출발 
17:40 포항 고속버스터미널  
22:20 서울 도착(버스: 643번, 8541번) 
22:50 귀가 
==============================================================================================================

■■■■■■■■■■■■■■■■■■ 2008.11.17(월) 작업 ■■■■■■■■■■■■■■■■
----> 07:40 ~ 21:00  --> 맥주(명동: 이과장), 이과장집(12번째) 

- 하나은행 Prj
- 하나은행 EDMS 차세대 연계 Proj(수신(금융정보)) 
- 제공정보작성 완료후 추가입력 기능 
<html:text name="DPB015WorkfloForm" property="workObject.disuse_yn" />  <!--  현재 작업자의 진행정도  --> 
--금융정보 대외기관통보 Table 필드 DISUSE_YN(현재_작업자의_진행정도)가 Y 이면 
명의등록 대상자 확정된 것으로 인식하여 변경 불가능 

-- 금융정보 대외기관통보 조회(대외기관통보 Tab:6번째) @@@@@@@@@@@@@  
SELECT INFO_OFFER_MTD_CD  ,  
INFO_OFFER_MTD_SUMM,  
OFFER_MEMBERS      ,  
OFFER_REQ_ACCT_CNT ,  
PRT_DOC_TPL_MGR    ,   
PRT_SUMM_TPL_MGR   ,  
MODIFIER           ,  
MODIFY_DATE        ,  
PRE_OFFER_DATE     ,  
DISUSE_YN AS 현재_작업자의_진행정도            
FROM DEPO_INF_ETL_NTF A  
--; 
==============================================================================================================

- 반송내역 대량파일 UPLOAD 기능 
명의통보내역(http://127.0.0.1:9002/dpfi_ReturnNtfInform.do?method=main) 
금융)통보내역(http://127.0.0.1:9002/dpfi_ReturnNtfInform.do)  
NTFCOST:  --작성자_진행정도(null:처음, D:작업시작, N:작업진행중, Y:작성끝(통보대상자 작성완료:책임자 상신가능))    
--------------------------------------------------------------------------------------------------- 

1. 명의통보서 조회 @@@@@@@@@@@@@  
SELECT IDX, NTF_DATE, OFFICIAL_DOC_NO, NM, POST_NO, POST_STATUS, INPUT_DATE 
FROM DEPO_WF_RET_NTF 
WHERE IDX = '12'  
ORDER BY IDX DESC 
--; 
---------------------------------------------------------------------------- 
  
2. 명의통보서 엑셀다운 실행(ExcelDown 이미지 클릭) 
 C:\depo_project\src\depoEar\depoWebApp\imgtmp\:1226918113093_down.xls 파일에 명의통보서 정보가 담김  
-- 명의통보서 다운구분 수정 @@@@@@@@@@@@@   ====> 2.엑셀다운로드 
UPDATE DEPO_WF_RET_NTF  
SET POST_STATUS = '10'  
--POST_STATUS(통보상태(00: 1.명의인 통보(다운로드전), 10: 2.엑셀다운로드, 20: 3.명의인 통보(+등기번호), 99 :4.등기서류 반송)) 
WHERE IDX = '12' 
--; 
---------------------------------------------------------------------------- 

3. 명의통보서 엑셀업로드 실행(ExcelUpload 이미지 클릭) 
엑셀업로드 -> 파일읽기(/dpfi_ReturnNtfFileUpload.do?method=upload) 

-- 1) 명의통보서 조회 @@@@@@@@@@@@@  
SELECT COUNT(IDX) X FROM DEPO_WF_RET_NTF 
WHERE IDX  = '12'           
  AND POST_STATUS IN ('00','10') 
--; 

-- 2) 명의통보서 등기번호 수정 @@@@@@@@@@@@@   ====> 3.명의인 통보(+등기번호) 
UPDATE DEPO_WF_RET_NTF  
SET POST_NO = NVL('1138202533348', ' '), POST_STATUS = '20'    --POST_NO(등기번호) 
 --POST_STATUS(통보상태(00: 1.명의인 통보(다운로드전), 10: 2.엑셀다운로드, 20: 3.명의인 통보(+등기번호), 99 :4.등기서류 반송)) 
WHERE IDX  = '12'  
--WHERE TRIM(POST_NUM) = '690200'  
--AND TRIM(NM) LIKE '백경훈%'  
--AND POST_STATUS IN ('00','10') 
--; 
---------------------------------------------------------------------------- 

4.1. 반송 내역 수정(반송내역 리스트 클릭) 
반송 내역 수정(/dpfi_ReturnNtfInform.do?method=detail&idx=12) 
반송 내역 수정 처리(/dpfi_ReturnNtfInform.do?method=modifyDetail&idx=12) 
-- 1) 반송 내역 수정 @@@@@@@@@@@@@ 
UPDATE  DEPO_WF_RET_NTF  
SET  WF_NO   = ?, NM = ? , OFFER_DATE= ?, NTF_DATE = ?, OFFICIAL_DOC_NO  = ?     
  , POST_NO = ?, RET_CAUSE = ?, RET_DATE = ?, RET_GUBUN = ?, POST_NAME = ?   
WHERE IDX = '12' 
--; 

4.2. 반송 내역 추가(반송내역추가 이미지 클릭) 
반송 내역 추가(/dpfi_ReturnInform.do?method=detail&idx=) 
반송 내역 반송 내역 수정 처리(/dpfi_ReturnNtfInform.do?method=addDetail&idx=12) 

-- 1) 반송 내역 MAX 조회 @@@@@@@@@@@@@ 
SELECT NVL(MAX(IDX),0) +1  IDX FROM DEPO_WF_RET_NTF 
--; 

-- 2) 반송 내역 추가 @@@@@@@@@@@@@ 
INSERT  INTO DEPO_WF_RET_NTF   
(IDX, WF_NO, NM, OFFER_DATE, NTF_DATE, OFFICIAL_DOC_NO          
, POST_NO, RET_CAUSE, RET_DATE, RET_GUBUN, POST_NAME)           
VALUES (  ?,?,?,?,?   ,?,?,?,?,? ,? ) 
--; 

4.3. 반송 엑셀업로드  ===> 추후 적용 
-- 1) 반송 내역 MAX 조회 @@@@@@@@@@@@@ 
SELECT NVL(MAX(IDX),0) +1  IDX FROM DEPO_WF_RET_NTF 
--; 

-- 2) 반송 내역 추가 @@@@@@@@@@@@@ 
INSERT  INTO DEPO_WF_RET_NTF   
(IDX, WF_NO, NM, OFFER_DATE, NTF_DATE, OFFICIAL_DOC_NO          
, POST_NO, RET_CAUSE, RET_DATE, RET_GUBUN, POST_NAME)           
VALUES (  ?,?,?,?,?   ,?,?,?,?,? ,? ) 
--; 
==============================================================================================================

-- 첨부문서 조회 
SELECT TO_CHAR(SEQ) SEQ,FILENAME 
FROM DEPO_TRANS_FILES 
WHERE TRIM(IMG_KEY) = ? 
AND DOC_TYPE = ? 
ORDER BY SEQ ASC  
--; 
-------------------------------------------------------------- 
-- 첨부문서 조회 
SELECT TRANS_FILE,FILENAME   
FROM DEPO_TRANS_FILES   
WHERE TRIM(IMG_KEY) = ?  AND TR 
ANS_TYPE = ?  AND DOC_TYPE = ?  AND FLAG = ? 
--; 
==============================================================================================================

- 수신 업무 실무 교육(16:00 ~ 19:00) 
1. 수신 협의 요청 사항(담당자: 양현주) 
 1) 전체적으로 수정 사항이 많음(가장 사용하기 불편한 것 부터 수정 요망) 
 2) 제공정보작성(금융정보작업 Tab ) 완료후 추가입력 기능 제공 요청 
 3) 명의인 통보서 업로드, 다운로드 기능 수정 요청 
==============================================================================================================

- 국민연금 납부 안내(자동이체 신청: 대리신청 해줌): 전화옴 
2008년 12월 10부터 납부 
납부금액: 88,870원 
현 납부개월: 88개월(120개월:연금, 240개월:노령연금)  
==============================================================================================================

■■■■■■■■■■■■■■■■■■ 2008.11.18(화) 작업 ■■■■■■■■■■■■■■■■
----> 08:20 ~ 21:30 

- 하나은행 Prj
- 하나은행 EDMS 차세대 연계 Proj(수신(금융정보))
- DB 테이블에 frexadm2 제거 
frexadm2.ocom_trcd  --> ocom_trcd 
frexadm2.itrn_code  --> itrn_code 
==============================================================================================================

- weblogic Start Server 에러 
C:\depo_project\build\depoEar\depoWebApp\WEB-INF\classes 
java.lang.ClassNotFoundException: com.hana.common.servlet.HanaActionServlet 
원인: 디버깅을 다시 해주면 class가 생성됨 
==============================================================================================================

- js-debugger 설정(디버깅) 
도구(T) -> 인터넷 옵션(O): 고급 
모든 스크립트 오류에 관련된 알림 표시: 체크 
스크립트 오류 사용 안함(다른 응용프로그램): 체크 안 함 
스크립트 오류 사용 안함(Internet Explorer): 체크 안 함 
==============================================================================================================

■■■■■■■■■■■■■■■■■■ 2008.11.19(수) 작업 ■■■■■■■■■■■■■■■■
----> 07:40 ~ 21:50  --> 머리 염색, 맥주(이과장집): 이과장(13번째) 

- 하나은행 Prj
- 명의인통보(명의인통보 조회_인쇄) 인쇄 수 조회(http://111.16.1.128/dpfi_PrintRegisterPerson.do) 
-- 명의인통보 인쇄(성공) 처리 @@@@@@@@@@@@@ ===> 100명 다시 결재완료로 환원: 4 -> 1 로 수정 
-- UPDATE DEPO_WF_NM_NTF   
SET  NTF_YN  = '1',  --통보여부( 1:통보, 2:통보상신, 3:결재중, 4:결재완료, 5:미통보 )  
OFFER_DATE  = TO_CHAR(SYSDATE, 'YYYYMMDD')  --기관제공일  
WHERE IDX IN ('618908', '618908', '618908') 
--; 
==============================================================================================================

- 금융정보 종료대기목록(http://111.16.1.128/dpfi_WorkListInbox.do) 
종료대기기간: 30일 
/DPWFTool.java에서( --> /DPMain.java) 
public Date getFinishDate() 
{ 
Calendar cal = Calendar.getInstance(); 
cal.add(Calendar.DATE, -30);   //종료대기 기간(30일) 설정  
Date currentTime=cal.getTime(); 
SimpleDateFormat formatter = new SimpleDateFormat("yyyyMMdd") ; 

return  currentTime ; 
} 
==============================================================================================================

- 파일 다운로드 오류 개선 
-추가 files : 
/depo_project/src/depoEar/depoWebApp/com/hana/common/file_download.jsp 
/depo_project/src/depoEar/depoWebApp/download/HanaBankImageEdit.zip 

- 수정 files :  
/depo_project/src/depoEar/depoWebApp/com/hana/depo/dpb/sub/dpb015_cvs_file_upload.jsp  
/depo_project/src/depoEar/depoWebApp/com/hana/depo/dpb/sub/dpb015_slip_upload.jsp 
/depo_project/src/depoEar/depoWebApp/com/hana/depo/dpb/sub/dpb040_cvs_file_upload.jsp 
  
- DB UPDATE 
UPDATE COMM_Cm_PROGRAM SET prg_link='com/hana/common/file_download.jsp?filePath=/download/&fileName=hanabankdoc1.zip'  
WHERE prg_id ='edms.depo.download.file1' 
--; 
UPDATE COMM_Cm_PROGRAM SET prg_link='com/hana/common/file_download.jsp?filePath=/download/&fileName=hanabankdoc2.zip'  
WHERE prg_id ='edms.depo.download.file2' 
--; 
UPDATE COMM_Cm_PROGRAM SET prg_link='com/hana/common/file_download.jsp?filePath=/download/&fileName=HanaBankImageEdit.zip'  
WHERE prg_id ='edms.depo.download.file3' 
--; 

SELECT * from COMM_Cm_PROGRAM  
WHERE prg_id IN ('edms.depo.download.file1', 'edms.depo.download.file2', 'edms.depo.download.file3') 
--; 
------------------------------------------------------------------------------------------------------ 

- 긴급 반영 요청(텔넷, telnet) 
1. 요청서 등록 
http://111.18.1.56/autoapply/lst 
2. 적용 요청서 (Excel)  작성 
\\111.18.1.56\hana_edms\80. EDMS운영적용요청\20081119\긴급_수신_운영_진태만_20081119_01.xls 
3. 요청 결과 확인 
http://111.18.1.56/autoapply/checklist 
 1) telent 접속 
 111.15.1.4(depo01/depo01_dev) 
> view .profile  
[depo01@sun450-03]/home/apps/dom_depo > svr1 
alias svr1='cd /sun450-04/dom_depo' ===> 실서버 1 
alias svr2='cd /sun450-05/dom_depo' ===> 실서버 2  
[depo01@sun450-03]/sun450-04/dom_depo >  find ./ -name "DPB050WorkfloAction.*" xargs ls -al 
-rw-rw-rw-   1 16       tuxedo     14896  7월 17일  10:20 ./serverclasses/depoEar/depoWebApp/WEB-INF/classes/com/hana/depo/dpb/action/DPB050WorkfloAction.class 
[depo01@sun450-03]/sun450-04/dom_depo > find ./ -name "dpb040_cvs_file_upload.jsp" xargs ls -al 
[depo01@sun450-03]/sun450-04/dom_depo > find ./ -name "dpb015_detail_pop05.jsp" xargs ls -al 
[depo01@sun450-03]/sun450-04/dom_depo > find ./ -name "report-24.odi" xargs ls -al 
-rw-rw-r--   1 16       tuxedo      7652 11월 13일  09:42 ./applications/oz35/repository_files/report-24.odi      
[depo01@sun450-03]/sun450-04/dom_depo> cd /home/apps/log/weblogic/depo 
[depo01@sun450-03]/sun450-04/log/weblogic/depo > ls -al 
-rw-rw-rw-   1 16       tuxedo   45761953 11월 25일  11:48 depo054.out 
[depo01@sun450-03]/sun450-04/log/weblogic/depo > tail -f depo054.out ===> log4j 로그 보기 

[depo01@sun450-03]/users/depo01 > logs  ===> 테스트 서버 로그  
[depo01@sun450-03]/home/apps/log/weblogic/depo > tail -f common.log ===>  테스트 서버 로그 보기 
==============================================================================================================

-  테스트 서버 반영 
1. eclipse에서 수정 후 Commit 
2. \WEB-INF\classes\com\hana\depo\dpb\action 폴더에서 해당 파일을 FTP로 올림 
(DPB015WorkfloAction.class) ==> 111.15.1.4 텔넷 접속(depo01/depo01_dev) 
3. 디플로이 해줌(조치: 메뉴 -> Run -> External Tools -> depo_project build.xml 실행) 
- 실서버 디버깅 ==> 
log.error("[금융정보]==> [dispatch()] [workfloForm.getWorkObject().getAccept_no()]"+ workfloForm.getWorkObject().getAccept_no().trim()); 
==============================================================================================================

- 오즈 파일반영 요청 
1. 수정 후에 테스트에 직접 적용(FTP에 적용) 
FTP 주소: 111.15.1.4(depo01/depo01_dev) 
리모드 리렉토리: /home/apps/dom_depo/applications/oz35/repository_files 
2. 박응용 과장에게 메신저로 수정내용이랑 수정파일 알림 
수정파일명: report-24.odi 
수정내용: 명의인통보 수정(명의인통보IDX에 distinct 추가) 
============================================================================================================== 

- myLG070 전화요금 납부 
지로번호: 6100315 
전자납부번호: 9002461346 
요금: 14,290 원(9, 10, 11월분) 
==============================================================================================================

■■■■■■■■■■■■■■■■■■ 2008.11.20(목) 작업 ■■■■■■■■■■■■■■■■
----> 08:40 ~ 22:00 

- 하나은행 Prj
- 접수번호 생성 오류 
- 금융)작업상태조회(http://111.16.1.128/dpfi_WorkListStatus.do) 
- 문서 발송(금융거래정보제공)(http://127.0.0.1:9002/difiSend.do?method=list) 
log.debug("[금융정보]==> [makeAccept_no()] [strSql.toString()]"+ strSql.toString()); 
- 금융정보접수(http://127.0.0.1:9002/DP015_Workobject.do?method=request)   
접수번호 Table명: DEPO_WF_MASTER  
접수번호 Column: ACCEPT_NO 
<html:text name="DPB015WorkfloForm" property="workObject.accept_no" size="12" readonly="true" />  ==> 접수번호 

- 접수번호 생성 로직(/DPB015WorkfloAction.java 에서) 
public ActionForward dispatch(  //다음단계 이동 메소드(결재요청 ==> 저장) 
if (workfloForm.getWorkObject().getAccept_no().trim().equals(""))  // 접수 번호가 없다면 
{ 
String year = Integer.toString(DateTime.getYear()); 
String mon  = Integer.toString(DateTime.getMonth()); 
workfloJDAO.makeAccept_no(year, mon, workfloForm.getWorkObject());   //접수번호 생성 
} 
} 

public void makeAccept_no(String year, String month, DPB015WorkfloModel model ) throws DatabaseException { 
strSql.append(" SELECT   NVL(max( to_number( substr(accept_no,9)) )+1 ,'0001')  seq   \n"); 
strSql.append("   FROM  depo_wf_master          \n"); 
strSql.append("  WHERE  upmu_gb  = '05'         \n"); 
strSql.append("    AND  map_cd   = '15'         \n"); 
strSql.append("    AND  accept_no like ?        \n"); 

pstmt = dbcon.prepareStatement(strSql.toString()); 
pstmt.setString(1, year +"-" + mon + "-%"); 
resultSet = pstmt.executeQuery(); 
} 
--------------------------------------------------------------------------------------- 
  
-- FILE NET Workplace(BPM) 
http://111.18.1.56:8080/WorkplaceDP   ==> peadmin / peadmin 

 -- 공통 맵정보 조회 @@@@@@@@@@@@@   
SELECT MAP_CD AS 맵ID,  --맵ID(15:센타, 20:영업점자료요청, 30:명의통보, 40:영업점, 50:통보비용)  
MAP_NM AS 맵명, MAP_DESC AS 맵설명, 
DEL_YN AS 삭제여부, UPMU_SUB_GB AS SUB업무구분, AGENT_NM 
FROM COMM_CM_MAP  
WHERE UPMU_GB = '05'    --업무구분(05:금융정보제공) 
--; 
==============================================================================================================

총(최초생성작업자가 NULL 포함): 9,799 
총(최초생성작업자가 NOT NULL 포함): 3,121,861 
 --------------------------------------------------------------------------------------- 

DP040 2008/02/28  대전지방법원논산지원 2008222 발송 은행동지점 이선문  
DP040 2008/05/19  금융감독원 조사이사00411 발송 석계역지점 배경숙  
DP040 2008/05/19  금융감독원 조사이사00411 발송 석계역지점 배경숙  
DP040 2008/11/11  동대문세무서 부가가치2008-11-20세2과7780 발송 휘경동지점 문영준    
==============================================================================================================

- 수신 업무 담당자(내선번호) 
강현정: 4350, 양현주: 4317 
==============================================================================================================

■■■■■■■■■■■■■■■■■■ 2008.11.21(금) 작업 ■■■■■■■■■■■■■■■■
----> 08:10 ~ 20:00 

- 하나은행 Prj
- 접수번호 생성 오류    
- 접수번호 생성 로직(/DPB015WorkfloAction.java 에서)  
-- F_SW.VWVQ14_INBOX 조회 @@@@@@@@@@@@@  
SELECT  RAWTOHEX(F_WobNum) F_WobNum, F_WorkSpaceId, F_Locked, F_LockMachine, F_LockUser, F_LockTime, F_LastUser,  
F_BoundUser, F_BoundMachine, F_Tag, F_UniqueId, F_OperationId, F_WorkClassId, F_EnqueueTime, F_CreateTime, F_InstrSheetId,  
F_WorkOrderId, F_TimeOut "F_TimeOut", F_Subject "F_Subject", F_Overdue "F_Overdue", iwfDisplayLevel "iwfDisplayLevel", 
iwfNormal "iwfNormal", swfBankCode "swfBankCode", swfBranchCode "swfBranchCode", swfMapId "swfMapId",  
swfPrevResponse "swfPrevResponse", swfPrevUser "swfPrevUser", swfStepId "swfStepId", swfCurGroup "swfCurGroup",  
swfRoleCode "swfRoleCode", iwfPrimeWork "iwfPrimeWork", swfScanOpId "swfScanOpId", swfRejectYN "swfRejectYN",  
swfMapVer "swfMapVer", iwfSeqNo "iwfSeqNo", swfRouteInfo "swfRouteInfo", swfCurUserId "swfCurUserId", 
F_UF021 "swfOrderType"  
FROM F_SW.VWQueue14_569  
WHERE F_Locked < 2  
   AND F_QueueWPClassId = 1   
   AND F_WobNum = '6AEB56DEEC0411DCA6480003BA29841F'    --WN_NO =======> TEST 
  --WITH READ ONLY 
--;  
---------------------------------------------------------------------------------------------------------- 

-- 접수번호 생성 조회 @@@@@@@@@@@@@    ===> 기존 
SELECT NVL(MAX( TO_NUMBER( SUBSTR(ACCEPT_NO,9)) )+1 ,'0001')    
FROM DEPO_WF_MASTER           
WHERE UPMU_GB  = '05'   --업무구분(05:금융정보제공) 
   AND MAP_CD  = '15'   --맵ID(15:센타, 20:영업점자료요청, 30:명의통보, 40:영업점, 50:통보비용) 
   AND ACCEPT_NO LIKE '2008-11-%'     --접수번호(2008-10-0001) 
--; 
---------------------------------------------------------------- 
  
-- 접수번호 생성 조회 @@@@@@@@@@@@@   ===> 수정 
--SELECT (SUBSTR(CR_ILSI,1,4) '-'  SUBSTR(CR_ILSI,5,2) '-%') CR_ILSI_LIKE 
SELECT NVL(MAX( TO_NUMBER( SUBSTR(ACCEPT_NO,9)) )+1 ,'000001')  --접수번호 6자리로 세팅(기존 4자리) 
FROM DEPO_WF_MASTER           
WHERE UPMU_GB  = '05'   --업무구분(05:금융정보제공) 
   AND MAP_CD IN ('15', '30')    --맵ID(15:센타, 20:영업점자료요청, 30:명의통보, 40:영업점, 50:통보비용) 
   --AND ACCEPT_NO LIKE '2008-10-%'     --접수번호(2008-10-0001)  
   AND ACCEPT_NO LIKE ( SELECT SUBSTR(CR_ILSI,1,4) '-' SUBSTR(CR_ILSI,5,2) '-%' 
            FROM DEPO_WF_MASTER   
  WHERE WF_NO = 'E9E4F00C9B4611DDA66F0003BA29841F'  
  )       
--;    
==============================================================================================================

-- 수신_WF 조회 @@@@@@@@@@@@@   ==> 에러: 담당자가 존재 하는데 접수번호가 없음  ===> 총 31건  
SELECT  A.WF_NO,  
A.OFFICIAL_DOC_NO AS 공문번호, 
--A.IMG_KEY                ,    
A.CR_ILSI 접수일자, 
SUBSTR(A.CR_ILSI,1,4) '-'  SUBSTR(A.CR_ILSI,5, 2) '-' SUBSTR(A.CR_ILSI,7,2)  접수일자2, 
A.ACCEPT_NO  AS 접수번호, 
A.OP_WORK_EMP_NO  AS 행번, 
(SELECT NVL(EMP_NM,'') FROM COMM_CM_USER WHERE EMP_NO = A.OP_WORK_EMP_NO ) 최초생성작업자, 
A.BR_CD AS 부점코드     , 
A.CR_BR_CD AS 부점코드2, 
COMM_CM_GET_BRNM_F(A.CR_BR_CD) 부점명,  
B.MGR AS 담당자, B.CHARGER AS 책임자, B.TEL_NO AS 전화  
FROM DEPO_WF_MASTER A, DEPO_WF_DETAIL B         
WHERE A.WF_NO = B.WF_NO   
AND A.ACCEPT_NO IS NULL   --접수번호 
AND B.MGR IS NOT NULL     --담당자 
AND B.TEL_NO IS NOT NULL  --전화 
--AND B.WF_NO = '6AEB56DEEC0411DCA6480003BA29841F  
-- AND SUBSTR(A.CR_ILSI,1,4) ''  SUBSTR(A.CR_ILSI,5,2) '' SUBSTR(A.CR_ILSI,7,2) >= '20081114'  -- 접수일자 
--; 
==============================================================================================================

- 적용 파일 
/depo_project/src/depoEar/depoWebApp/WEB-INF/src/com/hana/depo/dpb/action/DPB015WorkfloAction.java 
public ActionForward dispatch(ActionMapping mapping, 
            ActionForm form, 
            HttpServletRequest request, 
            HttpServletResponse response) throws Exception { 
} 

/depo_project/src/depoEar/depoWebApp/WEB-INF/src/com/hana/depo/dpb/dao/DPB015WorkfloJDAO.java 
public void makeAccept_no(String year, String month, DPB015WorkfloModel model ) throws DatabaseException { 
} 

public void makeAccept_no(String year, String month, DPB015WorkfloModel model, int plusNumber ) throws DatabaseException { 
}  

/depo_project/src/depoEar/depoWebApp/WEB-INF/src/com/hana/depo/dpfi/dao/DpfiWorkAssignListInboxJDAO.java  
public void setAccet_no(String wob, String accept_no) throws DatabaseException { 
} 

/depo_project/src/depoEar/depoWebApp/WEB-INF/src/com/hana/depo/dpfi/dao/DpfiWorkfloJDAO.java 
public void insertMetaData(DpfiWorkfloModel model) throws DatabaseException  { 
} 
==============================================================================================================

- 이클립스(eclipse)에서 재설치 
1. eclipse-SDK-3.2.2-win32 설치 후 문제점(eclipse에서 Server 안 보임): 해결책(eclipse-SDK-3.2 이상 설치) 
1) eclipse-SDK-3.4 설치 
2) installed JRE 추가 
(Window -> Prefrerence > Java -> installed JRE --> add: C:\j2sdk1.4.2_04 추가)  

Server port In Use 9002-Http: 해결책(작업관리자에서 java.exe, javae.exe 파일 삭제) 
- struts-config.xml 안 보이는 현상 
해결책: Ant Runtime 설정 
 1. (Window -> Prefrerence > Ant -> Runtime 에서 Classpath Tab -> Global Entries 선택 -> Add External JREs 클릭 
‘C:\bea\weblogic81\server\lib\weblogic.jar’추가  
 2. Task Tab 선택 -> Add Task 클릭( Name : wlappc, wlcompile, wldeploy 3개 처리  
 3. /depo_project/src/depoEar/build.xml 선택 ==> Run as -- > 2. Ant Build 
==============================================================================================================

- 화공과 축구부 회비 입금(5만원): 송금 완료 
대구은행 006-13-032416  이동규 
- 경태, 순정 축의금 입금(5만원): 송금 안함 
   김일남  
==============================================================================================================

■■■■■■■■■■■■■■■■■■ 2008.11.22(토) 작업 ■■■■■■■■■■■■■■■■
----> 09:20 ~ 18:00  --> 피자 5판(한우리 사장), 정동진 여행 

- 하나은행 Prj
 3. 명의통보서 엑셀업로드 실행(ExcelUpload 이미지 클릭) 
엑셀업로드 -> 파일읽기(/dpfi_ReturnNtfFileUpload.do?method=upload) 

-- 1) 명의통보서 조회 @@@@@@@@@@@@@  
SELECT COUNT(IDX) X FROM DEPO_WF_RET_NTF   
WHERE POST_NUM   = ?               --//우편번호 
AND NM LIKE ?             --//성명 
AND POST_STATUS IN ('00','10')  
--; 

-- 2) 명의통보서 등기번호 수정 @@@@@@@@@@@@@   ====> 3.명의인 통보(+등기번호) 
UPDATE DEPO_WF_RET_NTF  
SET POST_NO = NVL('1138202533348', ' '), POST_STATUS = '20'    --POST_NO(등기번호) 
 --POST_STATUS(통보상태(00: 1.명의인 통보(다운로드전), 10: 2.엑셀다운로드, 20: 3.명의인 통보(+등기번호), 99 :4.등기서류 반송))  
--WHERE TRIM(POST_NUM) = '690200'     --//우편번호 
--AND TRIM(NM) LIKE '백경훈%'     --//성명 
--AND POST_STATUS IN ('00','10') 
--;  
==============================================================================================================

4.3. 반송 엑셀업로드  ===> 추후 적용 
-- 1) 반송 내역 MAX 조회 @@@@@@@@@@@@@ 
SELECT NVL(MAX(IDX),0) +1  IDX FROM DEPO_WF_RET_NTF 
--; 
  
-- 2) 반송 내역 추가 @@@@@@@@@@@@@ 
INSERT  INTO DEPO_WF_RET_NTF 
(IDX, WF_NO, NM, OFFER_DATE, NTF_DATE, OFFICIAL_DOC_NO 
, POST_NO, RET_CAUSE, RET_DATE, RET_GUBUN, POST_NAME) 
VALUES (  ?,?,?,?,?   ,?,?,?,?,? ,? ) 
--;  
==============================================================================================================

- 정동진 여행  
- 18:00 퇴근(명동 하나은행 허브): 이과장 
- 18:40 귀가(낙성대 집) 
- 19:00 낙성대 출발(자가용): 이과장 
- 21:30 문막 휴게소(우동) 
- 23:10 모텔(강릉): 4만원(14번째): 4시간 10분 소요 
- 23:10 맥주(모텔) 
- 23:40 취침(이과장) 
========================================================================================================= 

- 정동진 
경부고속도로를 타시고 수원 방향으로 가시다 신갈ic에서  
영동고속도로 강릉 방향으로 타시고 강릉까지 가신다음 강시청 오거리에서   
정동진 방향으로 구영동고속도로를 타시고 정동진ic에서 나가시면 됨 

- 대관령 양떼 목장 
정동진을 떠나서, 안인진을 거치면 구 동해고속도로(현 7번국도)로 강릉으로 갈 수  
있으며, 강릉시청이 보이는 홍제교차로에서 서울방향으로 빠지게(내려오게) 됩니다. 
강릉시청 앞을 지나 서울방향으로  가면 고가 밑에서 우회전을 하게 되고, 
한 2km 쯤에 우측으로 빠져서 고속도로  강릉IC로 들어가게 됩니다. 
(그냥 직진해도 구 영동고속도로(현 456번 지방도)로 대관령을 오를 수 있으며 시간은 
비슷하게 걸립니다.) 
고속도로를 탄다면 대관령 넘어서 횡계IC에서 빠져서 우회전하여 1km 쯤 고속도로가  
지나는 굴다리 통과후 바로 만나는 신호등사거리에서 좌회전하면 됩니다. 그길이 도로 
456번 지방도죠. 한 5km 올라가면 오른편 휴게소에서 왼편으로 넘어가는 육교가 있고, 
거기 건너가면 목장입구가 나옵니다. 
대관령 목장을 보고나면 4시 정도 소요 

- 금진유람선: http://local.naver.com/siteview.nhn?code=11673684 (http://www.jungdongboat.com/) 
썬 크루즈: http://www.esuncruise.com/ 
http://www.jeongdongjin.co.kr/jboja.htm 
http://tour.interpark.com/goods/detail.aspx?GoodsCD=08112210721&cate=5 
http://www.korailtours.com/goods/index.asp?ts=goods_detail&nav=goods&good_cd=DAA2008203&area_cd=AA&sub_area_cd=BC 
==============================================================================================================

- 하나은행 명동 허브 주소  
(100-021) 서울특별시 중구 명동1가 59-5 명동HUB B/D 5F EDMS팀 
==============================================================================================================

■■■■■■■■■■■■■■■■■■ 2008.11.23(일) 작업 ■■■■■■■■■■■■■■■■
----> 09:20 ~ 18:00 
 
- 정동진 여행2
- 09:00 기상 
- 10:00 정동진 
- 10:10 아침식사(정동진 모레시계 공원 근처 식당): 이과장 
- 10:50 골드 코스트 유람선 버스 탑승 
- 11:10 골드 코스트 유람선 탑승(만 5천원) 
- 12:10 모레시계 공원 
- 13:00 대관령 양떼 목장(사료값 3천원): 양에게 먹이 주기 
- 15:00 대관령 양떼 목장 출발(서로 거기 만지기) 
- 16:40 횡성 휴게소(장터 해장국) 
- 19:00 이천 휴게소(동서울 방향) 
- 21:00 송파구쪽으로 나옴 
- 22:00 귀가(낙성대): 7시간 소요 
- 23:40 취침(이과장)(15번째) 
==============================================================================================================

■■■■■■■■■■■■■■■■■■ 2008.11.24(월) 작업 ■■■■■■■■■■■■■■■■
----> 08:20 ~ 22:00 

- 하나은행 Prj
- 금융)통보내역(http://127.0.0.1:9002/dpfi_ReturnNtfInform.do?method=ReturnUpload)   
4.3. 반송 엑셀업로드  ===> 추후 적용 
-- 1) 명의통보서 조회 @@@@@@@@@@@@@  
SELECT COUNT(IDX) X FROM DEPO_WF_RET_NTF   
WHERE POST_NO   = ?                  --//등기번호  
AND POST_STATUS IN ('99')     --//통보상태(99 :4.등기서류 반송) 
--; 

-- 2) 명의통보서 등기번호 수정 @@@@@@@@@@@@@   ====> 3.명의인 통보(+등기번호) 
UPDATE DEPO_WF_RET_NTF  
SET   RET_DATE = ? --반송일 
, POST_STATUS = '99'    --통보상태(99 :4.등기서류 반송) 
WHERE POST_NO   = ?                  --//등기번호  
AND POST_STATUS IN ('99')     --//통보상태(99 :4.등기서류 반송) 
--; 
----------------------------------------------------------------------------- 

- EXCEPTION 에러 
에러내용: EXCEPTION raised 4 
[09:59:43] (?:?) - [distinctCellData()] [이름] [result[3]]김하나 
처리: String[] result = new String[] {"","","","",""};  //해당 수를 늘려 줌 
==============================================================================================================

- 전표 및 영업점 요청리스트 
금융정보제공 전표/수표 진행상황 (http://111.16.1.128/dpfi_BillList.do?method=listCenter)  
- 상세 이력조회(http://111.16.1.128/DpfiWorkHistory.do?method=view&wf_no=9594975468FC11DDAB5A0003BA0D8E19)  
AND J.FINISH_CD IN ('0','2')    --미완료 ==> 작업상태(A:전체, Y:완료, N:미완료)  
AND ( J.FINISH_CD != '0' AND  J.FINISH_CD != '2' )   --완료 ==> 작업상태(A:전체, Y:완료, N:미완료)   
정상 완료인 경우 ==> 상세 이력  조회에서 현재 스탭명: 센타 책임자 결재 완료 
미완료인 경우 ==> 현재 스탭명이 종료대기인 WF_NO: FD1D3C6C96A811DDAB5F0003BA0D8E19, 
ACB7EBCC99B011DDAB5F0003BA0D8E19, 98F6AB5E9E6611DDAB600003BA0D8E19 
==============================================================================================================

■■■■■■■■■■■■■■■■■■ 2008.11.25(화) 작업 ■■■■■■■■■■■■■■■■
----> 07:30 ~ 20:00  --> 점심, 저녁 안먹고 집에 가서 먹음(업무 스트레스) 

- 하나은행 Prj
- 실서버 에러 발생 
현상: 실서버에 log.error 로그를 찍은 후 DBEA-001128 에러 
<BEA-001128> <Connection for pool "DB2XAConPool" closed.>  
원인: Connection pool 에러로 추측 됨 
==============================================================================================================
    
 - 통보비용 결재상신 에러(http://111.16.1.128/DPB050_Workobject.do?method=list) 
내용: 결재상신에서 수납보고서 작성 클릭을 하면 에러가 남 
원인: 데이타가 수납하는 과정에서 length가 2000 Byte가 넘어서 에러가 나는 것으로 추측 됨 
document.forms[0].action = document.forms[0].action.substring(0, 2000);     
//alert("[/ReceiptRPTGenerate()] [document.forms[0].action.length]"+ document.forms[0].action.length); 

document.forms[0].action = strUrl+ workObjcetId + seq;  //URL 
document.forms[0].submit();  
해결책: 조회 리스트의 조회 줄수를 줄여줌(200 --> 50) 
/DPB050WorkfloJDAO.java 
public final int MAX_VIEW_ROW_COUNT = 50;   //VIEW_ROW: 200 

해결책2: POST 방식으로 보냄(/dpb050_list.jsp 파일에서) 
function ReceiptRPTGenerate() { //결재상신 처리 
var seq_cnt = 0; 
var objForm1 = document.forms[0].wob; 

for (var i=1; i<objForm1.length;i++) { 
    if (objForm1[i].type == "checkbox" && objForm1[i].checked == true) {  //체크됨 
workObjcetId += objForm1[i].value + ";"; 
seq += objForm2[i].value + ";"; 
seq_cnt = seq_cnt+1;   //체크한 수 
    } 
    } 
var form = document.DPB050WorkfloForm;  
document.DPB050WorkobjectSubmit.workObjcetId.value = workObjcetId; 
document.DPB050WorkobjectSubmit.seq.value = seq; 
document.DPB050WorkobjectSubmit.searchDT1.value = form.startDate.value;  //접수일자 
document.DPB050WorkobjectSubmit.searchDT2.value = form.endDate.value; //접수일자2    
document.DPB050WorkobjectSubmit.submit();  
//var strUrl = "/DPB050_Workobject.do?method=request"; 
//var workObjcetId = '&workObjcetId='; 
//var seq = '&seq='; 
//document.forms[0].action = strUrl+ workObjcetId + seq;   //GET 방식(기존) 
//document.forms[0].submit(); 
} 

<form name="DPB050WorkobjectSubmit" method="post" action="/DPB050_Workobject.do"> 
<input type="hidden" name="method" value="request"> 
<input type="hidden" name="workObjcetId" value=""> 
<input type="hidden" name="seq" value=""> 
<input type="hidden" name="searchDT1" value=""> 
<input type="hidden" name="searchDT2" value=""> 
</form>  
------------------------------------------------------------------------------------------------- 

- 통보비용자동수납(http://111.16.1.128/DPB060_Workobject.do?method=automatch)   
==============================================================================================================

- 저장 쿼리 로그 보기 설정 
query.append(" INSERT INTO DEPO_TRANS_FILES \n"); 
query.append(" (IMG_KEY,  \n"); 
query.append(" SEQ,  \n"); 
query.append(" TRANS_TYPE, \n"); 
query.append(" DOC_TYPE, \n"); 
query.append(" FILENAME, \n"); 
query.append(" TRANS_FILE)  \n"); 
query.append(" VALUES(?,?,?,?,?,EMPTY_BLOB()) \n"); 

log.debug("[금융정보]==> [insertTransFile()] [query]"+ query);  
log.debug(" VALUES( '"+ imgKey +"', '"+ seq +"', '"+ transType +"', '"+ docType +"', '"+ filename +"'   "); 
log.debug(" , EMPTY_BLOB() ) "); 
==============================================================================================================

■■■■■■■■■■■■■■■■■■ 2008.11.26(수) 작업 ■■■■■■■■■■■■■■■■
----> 07:20 ~ 21:30 --> 포도주(이과장집): 이과장(16번째) 

- 하나은행 Prj
- 자동수납, 명의인통보 엑셀파일 전달(김민영 차장) 
접수일자: 10월 29일 ~ 11월 25일   
==============================================================================================================
     
 - Tab 4: 금융정보작업(/DP015_Workobject.do?method=iframe&page=05) 
 - Tab 5: 통보대상(/DP015_Workobject.do?method=iframe&page=04)  
==============================================================================================================

- table 권한 문제 
내용: java.sql.SQLException: ORA-01031: insufficient privileges 
원인: 사용자 depo에게 테이블 권한이 없음 
조치 사용자 depo에게 DEPO_WF_NTFCOST 테이블 권한을 줌 
GRANT DELETE, SELECT, INSERT, UPDATE ON  DEPO_WF_NTFCOST TO DEPO;  
-- CREATE SYNONYM DEPO.DEPO_WF_NTFCOST FOR DEPO_WF_NTFCOST;  
==============================================================================================================

- CRM팀에 INPUT 으로 어떤 정보 전달하는지 확인 
===> 주민번호를 전달하는 것 같습니다. 

/DPB015WorkfloJDAO.java 파일에서  
public void cpyNmCpy2nmNtf(String wf_no, String emp_no) { 
CRM005 crm005 = new CRM005();  

URLFetch fetch = new URLFetch(crm005); 
fetch.addParam("P_ID_NO", id_no );  //실명번호(주민사업자번호) 
fetch.addParam("menuid", "000887");  
} 
==============================================================================================================

 - 금융정보 관련 테이블 
DEPO_WF_MASTER(마스터 Table), DEPO_WF_DETAIL(접수내역 Table) 
DEPO_INF_ETL_NTF(작성 내역 요약 Table), DEPO_WF_NM_NTF(통보대상자들 Table) 
DEPO_WF_NTFCOST(통보비용관리 Table), DEPO_ITEMS_SLT(출력 필드 보관 Table) 
DEPO_WF_HOSTDATA2(기타 CRM연동 Table), DEPO_WF_HOSTDATA1(수신,여신,수익,외화 관련 Table)  
DEPO_WF_HOSTDATA3(타시스템연동 Table),   
DEPO_WF_HOSTDATA4(통보대상자 Table)  ==> 통보대상자 임시 보관을 하는 Table  
DEPO_WF_HOST_ACCT(수납내역 Table), DEPO_WF_RCPT_DETAILS(수납여부 기록용 Table) 
DEPO_WF_RET_NTF(반송내역 Table), COMM_CM_HISTORY(공통_CM_이력 Table)  
COMM_CM_SAM_HISTORY(계정계 수표정보 Table), COMM_CM_URL_HISTORY(작성자 연동 요청내역 Table)   
COMM_CM_HISTORY(공통_CM_이력 Table) COMM_CM_URL_FUNC(연계함수 Table) 
==============================================================================================================

- 금융정보 결재목록(http://127.0.0.1:9002/dpfi_WorkAppListInbox.do) 
에러내용: For input string   
원인: 총 통보 금액이 null이면 parseInt이 안됨 
int tna = Integer.parseInt(StringUtil.replace(model.getTotalNtfAmt(), ",",""));  //총 통보 금액 
조치: 총 통보 금액을 null 처리 해줘야 함 
if ( model.getTotalNtfAmt() != null && model.getTotalNtfAmt() != "") { 
tna = Integer.parseInt(StringUtil.replace(model.getTotalNtfAmt(), ",","")); 
}  

/dpfi_work_app_list_inbox.jsp 파일에서 
function goDetails(workObjectId, mapNm, mapDesc, stepId) {  
if(mapNm !='DP050'){ 
}else{ //금융정보제공 통보비용 이면 ===> 결재처리 
var param = "/DPB050_Workobject.do?method=appv"; 
param += "&mapName=" + mapNm; 
//param += "&workObjectId="+ workObjectId 
param += "&workObjectId="+ workObjectId;  //====> 변경 
param += "&queueName=Inbox"; 
param += "&mapDesc="+ mapDesc; 
document.DpfiWorkAppListInboxForm.action = param; 
alert("[goDetails()]  [결재처리시] [param]"+ param;  
document.DpfiWorkAppListInboxForm.submit(); 
}  
}  

- 수정한 파일 
/depo_project/src/depoEar/depoWebApp/com/hana/depo/dpfi/body/dpfi_work_app_list_inbox.jsp 
/depo_project/src/depoEar/depoWebApp/com/hana/depo/dpb/body/dpb050_appv.jsp 
/depo_project/src/depoEar/depoWebApp/WEB-INF/src/com/hana/depo/dpb/action/DPB050WorkfloAction.java 
==============================================================================================================

■■■■■■■■■■■■■■■■■■ 2008.11.27(목) 작업 ■■■■■■■■■■■■■■■■
----> 08:40 ~ 22:10 

[하나은행 Proj] 
    
- 통보비용 결재상신 수정(http://111.16.1.128/DPB050_Workobject.do?method=list) 
==> 수납보고서 상신(http://111.16.1.128/DPB050_Workobject.do?method=request&workObjcetId=3A46092AA55911
DDAB600003BA0D8E19;&seq=11812;) 
 수납보고서 결재(http://127.0.0.1:9002/DPB050_Workobject.do?method=appv&mapName=DP050&workObjectId
 =C5AB7D2806E011DDA64B0003BA29841F&queueName=Inbox&mapDesc=금융정보제공%20통보비용) 

/dpb050_list.jsp 파일에서 ( /dpfi_work_app_list_inbox.jsp)   
var searchDT1 = form.startDate.value;  //접수일자 
var searchDT2 = form.endDate.value;  //접수일자2  
var searchDT = "&searchDT1="+ searchDT1 +"searchDT2="+ searchDT2; 
document.forms[0].action = strUrl + searchDT + workObjcetId + seq;  //URL  
- 수정한 파일 
/depo_project/src/depoEar/depoWebApp/com/hana/depo/dpb/body/dpb050_list.jsp 
/depo_project/src/depoEar/depoWebApp/com/hana/depo/dpb/body/dpb050_request.jsp 
/depo_project/src/depoEar/depoWebApp/WEB-INF/src/com/hana/depo/dpb/action/DPB050WorkfloAction.java 
/depo_project/src/depoEar/depoWebApp/WEB-INF/src/com/hana/depo/common/model/WorkfloModel.java  
==============================================================================================================

-- 통보대상 조회(통보대상 TAB:5번째) @@@@@@@@@@@@@  
SELECT DISTINCT ID_NO AS 실명번호 
-- SELECT * 
FROM DEPO_WF_HOSTDATA4  -- 통보대상자 데이터 Table  --> 통보대상자 임시 보관을 하는 Table 
WHERE WF_NO = 'DC6EFF54B9C711DDAB610003BA0D8E19' 
--;  
----------------------------------------------------------------------------- 
- /DPB015WorkfloJDAO.java 파일에서    ====> batch로 도는 것으로 추정됨 
public void makeHostdata41(String wf_no  ) {  
sql.append("\n    INSERT INTO  depo_wf_hostdata4 (   ) ");   
} 

public void makeHostdata42(String wf_no  ) {  
sql.append("\n    INSERT INTO  depo_wf_hostdata4 (   ) ");   
}  
==============================================================================================================

- 오즈 파일반영 요청 
1. 수정 후에 테스트에 직접 적용(FTP에 적용) 
FTP 주소: 111.15.1.4(depo01/depo01_dev) 
리모드 리렉토리: /home/apps/dom_depo/applications/oz35/repository_files 
2. 박응용 과장에게 메신저로 수정내용이랑 수정파일 알림 
수정파일명: report-24.odi 
수정내용: 명의인통보 수정(명의인통보자 불일치 수정) ==> 주소 테이블 OUTER 조인 오류 
----------------------------------------------------------------------------- 

- 명의인 통보 검토 사항 ===> DEPO_WF_HOSTDATA2 테이블에 주소가 여러 건이 싸임(MAX(POST_ADDR1)로 처리) 
SELECT * FROM DEPO_WF_NM_NTF WHERE IDX = '842343'  
SELECT * FROM DEPO_WF_HOSTDATA2 WHERE WF_NO = '0FEBE322AFC511DDAB600003BA0D8E19'  -- 여러건 생성 
============================================================================================================== 
  
■■■■■■■■■■■■■■■■■■ 2008.11.28(금) 작업 ■■■■■■■■■■■■■■■■
----> 07:40 ~ 23:40  --> 점심(후남) 
  
- 하나은행 Prj
- 명의인 통보서 업로드(등기발송 리스트) 
요청 받은 Excel 파일을 우편번호, 이름, 등기번호로 조회하여 update 시킴 
1. test DB에 백업 frexadm / frexadm11 
CREATE TABLE DEPO_WF_RET_NTF_200081128 AS SELECT * FROM DEPO_WF_RET_NTF@REAL_BPM 
SELECT COUNT(*) FROM DEPO_WF_RET_NTF_200081128 ;  --DEPO_WF_RET_NTF(반송내역 Table) 

2. 운영 DB에서 SELECT / UPDATE 를 한다. 
- 먼저 SELECT를 해서 모든 데이타의 건수를 조회한다. 
- 건수 1인 것만 UPDATE를 한다.(단 업데이트 건수가 1인지 확인을 한번더 한다.) 
- commit 
SELECT * FROM DEPO_WF_RET_NTF  ==> 우편번호 조회 
2008년 11월04일 등기발송리스트(등록 실패건).xls 작성 

명의인통보 수정(명의인통보자 불일치 수정)  
http://111.16.1.128/dpfi_PrintRegisterPerson.do 

1. 02. 2008년 11월 18일, 26일 등기발송리스트(처리).xls 파일에서 SELECT 문 복사 
select 'CNT',count(*) from depo_wf_ret_ntf where trim(post_num)  = ' 122830 ' AND trim(nm) like ' 조원주 %' AND post_status in ('00','10'); 
select 'CNT',count(*) from depo_wf_ret_ntf where trim(post_num)  = ' 134020 ' AND trim(nm) like ' 채석운 %' AND post_status in ('00','10'); 
select 'CNT',count(*) from depo_wf_ret_ntf where trim(post_num)  = ' 110043 ' AND trim(nm) like ' 참여연대 %' AND post_status in ('00','10'); 

2. 바꾸기(Ctr + R): ^T  --> 널 값  ===> 모두 바꾸기(A) 실행 
select 'CNT',count(*) from depo_wf_ret_ntf where trim(post_num)  = '122830' AND trim(nm) like '조원주%' AND post_status in ('00','10');    
select 'CNT',count(*) from depo_wf_ret_ntf where trim(post_num)  = '134020' AND trim(nm) like '채석운%' AND post_status in ('00','10');    
select 'CNT',count(*) from depo_wf_ret_ntf where trim(post_num)  = '110043' AND trim(nm) like '참여연대%' AND post_status in ('00','10');  
3. Toad에서 F5(Execute as Script) 실행  
'CN   COUNT(*) 
--- ---------- 
CNT          0 

1 row selected. 

'CN   COUNT(*) 
--- ---------- 
CNT          1 

1 row selected. 

'CN   COUNT(*) 
--- ---------- 
CNT          2 
4. 복사한 Script를 UtraEdit으로 가지고 와서 새창을 열어서 붙여넣기(P)   
5. UtraEdit에서 
찾기(Atl + A): CNT       ===> 문자를 포함한 줄 목록(L): 체크, 모두 세기(A)  ===> 다음 찾기(F) 실행 
==> 찾은 문자열을 포함하는 줄:    ===> 클립보드(P) 
==> 새창을 열어서 붙여넣기(P)를 함 
CNT          0     
CNT          1     
CNT          2      
6. UtraEdit에서  원하는 열을 클릭하여 열모드를 클릭 
=> 복사(C) -> (0, 1, 2만 복사됨) 
0 
1 
2 
8. 02. 2008년 11월 18일, 26일 등기발송리스트(처리).xls 파일에서 UPDATE 문 조회수 칼럼에 복사 
조회수 
0 UPDATE depo_wf_ret_ntf SET post_no = NVL(' 1130601449670  ', ' '), post_status = '20'  
WHERE trim(post_num)   = ' 122830 ' AND trim(nm) like ' 조원주 %' AND post_status in ('00','10'); 
1 UPDATE depo_wf_ret_ntf SET post_no = NVL(' 1130601449672  ', ' '), post_status = '20' 
WHERE trim(post_num)   = ' 110043 ' AND trim(nm) like ' 참여연대 %' AND post_status in ('00','10'); 
2 UPDATE depo_wf_ret_ntf SET post_no = NVL(' 1130601449675  ', ' '), post_status = '20'  
WHERE trim(post_num)   = ' 135825 ' AND trim(nm) like ' 하기철 %' AND post_status in ('00','10'); 
9. 02. 2008년 11월 18일, 26일 등기발송리스트(처리).xls 파일에서 자동 정렬을 하여 조회수가 1인 건만 복사 
조회수 
0 
1  ---> 선택 
2  
10. Orange에서 조회수가 1인 UPDATE 문을 붙여 넣음  
11. Orange에서 Option -> File Output -> FileOutput_UP.txt(새로 생성) ===> F5 단축키 누르면 결과값 저장됨 
(==> 10. Toad에서 UPDATE 을실행) 
UPDATE depo_wf_ret_ntf SET post_no = NVL('1130601449671 ', ' '), post_status = '20' WHERE trim(post_num)   = '134020'  
AND trim(nm) like '채석운%' AND post_status in ('00','10');  
==============================================================================================================

-- 명의인 통보서 정보 수정 @@@@@@@@   
SELECT COUNT(*) FROM DEPO_WF_RET_NTF_200081128 ;  --DEPO_WF_RET_NTF(반송내역 Table) 
--; 
-- 명의인 통보서 정보 수정 @@@@@@@@   --> 2,115 건 처리(33분 소요) 
UPDATE DEPO_WF_RET_NTF@REAL_BPM U  
SET U.POST_STATUS ='10',   --통보상태(00: 1.명의인 통보(다운로드전), 10: 2.엑셀다운로드) 
U.POST_NO = NULL      --등기번호 
WHERE EXISTS 
   (SELECT 'X' 
    FROM DEPO_WF_RET_NTF_200081128 B 
WHERE U.POST_NUM = B.POST_NUM     --우편번호 
AND U.NM = B.NM     --성명 
AND B.POST_STATUS IN ('00','10')   --통보상태(00: 1.명의인 통보(다운로드전), 10: 2.엑셀다운로드) 
  )    
  AND U.POST_STATUS IN ('20')     --통보상태(20: 3.명의인 통보(+등기번호), 99 :4.등기서류 반송) 
  --AND U.POST_NO IS NOT NULL   --등기번호 
--;  
==============================================================================================================

■■■■■■■■■■■■■■■■■■ 2008.11.29(토) 작업 ■■■■■■■■■■■■■■■■
----> 09:10 ~ 18:00  --> DVD방(인디아나 존스(황금 해골의 비밀(명동): 이과장: 고추 다침)), 이과장집(17번째) 
  
- 하나은행 Prj
 - FAX 전송 발송 자료 오류 수정 
출금 의뢰인(OACCT_NM) 데이타 ->   입금 의뢰인(IACCT_NM) 데이타 
공문번호: 00853 
/DpfiLegacyInfoPublishAction.java 파일에서  
public class DpfiLegacyInfoPublishAction extends BaseDispatchAction { 
if(pubMethod.equals(DpfiLegacyInfoPublishJDAO.FAX)){  //fax 발송을 하면 image.html.pdf 파일이 생성 
legacyJDAO.createHTML(wob,fullPath, userAccount.getEmp_no(), userAccount.getEmp_nm(), hostListMap); 
} 
} 
/DpfiLegacyInfoPublishJDAO.java 파일에서 
public void createHTML(String wob,String fullPath, String userId,String userName, LinkedHashMap hostMap) { 
createHTMLChapter(wob,key,value,  fieldMap,  out,cnt++, info); 
} 
  
createHTMLChapter(String wob,String type,String value, LinkedHashMap fieldMap, BufferedWriter doc,int cnt, 
LinkedHashMap headerInfo) {  
rs = getCRMList(wob, type);  
} 

public ResultSet getCRMList(String wob, String type) { 
ps = getCRMStatementsHost3(wob, type); 
} 

public PreparedStatement getCRMStatementsHost3(String wob, String type) { 
query.append("\n SELECT  "); 
query.append("\n WF_NO "); 
uery.append("\n ,OACCT_NM ");  //출금의뢰명 
query.append("\n ,IACCT_NM "); //입금의뢰명 
query.append("\n FROM  DEPO_WF_HOSTDATA3  "); 
query.append("\n WHERE WF_NO = ? AND FETCH_GUBUN = ?  "); 
ps = dbcon.prepareStatement(query.toString(), ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_READ_ONLY); 
} 

/**57 PKG PKG007 가상 및 증권계좌-가상계좌거래내역 : 완료  
public final static LinkedHashMap pkg007ListMap = new LinkedHashMap(); 
static{ 
pkg007ListMap.put("TR_IL", "거래일자"); 
pkg007ListMap.put("TR_SI", "거래시간"); 
pkg007ListMap.put("ORG_NM", "취급은행"); 
pkg007ListMap.put("TR_NO", "거래번호"); 
pkg007ListMap.put("HANDBR_CD", "취급점"); 
pkg007ListMap.put("MEDIA_GB", "거래종류"); 
pkg007ListMap.put("TR_AMT", "금액"); 
pkg007ListMap.put("IACCT_NO", "입금계좌"); 
pkg007ListMap.put("OORG_NM", "출금은행"); 
pkg007ListMap.put("OACCT_NO", "출금계좌"); 
pkg007ListMap.put("TRADM_NO", "고유번호"); 
pkg007ListMap.put("IACCT_NM", "입금의뢰명");  //수정(OACCT_NM --> IACCT_NM) 
}   

- 수정한 파일 
/depo_project/src/depoEar/depoWebApp/WEB-INF/src/com/hana/depo/dpfi/dao/DpfiLegacyInfoPublishJDAO.java 
==============================================================================================================

■■■■■■■■■■■■■■■■■■ 2008.11.30(일) 작업 ■■■■■■■■■■■■■■■■
----> 08:00 ~ 15:00 

▦조기축구
08:00 기상(장위1동 이과장집): 고* 아퍼서 못함 
08:10 버스(장곡초등학교: 147번) 
09:10 신구초등학교 
09:20 게임 
10:50 종료  
11:30 춘집회원님(김치찌게): 오세림 고문 차기 회장으로 잠정 결정 
14:00 상요형 가게(재활용센터 URL가르쳐 줌: jakn.biz): 포세도(플라스틱용기: 60L, 120L, 660L) 
19:00 귀가 
==============================================================================================================
■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
+--------------------------------------------------------// End //--------------------------------------------------------+
■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■